\documentclass[paper=b5, fontsize=12pt, pagesize=auto, chapterprefix, headsepline=true, parskip=half, DIV=12]{scrbook}
\usepackage{scrlayer-scrpage}
\setkomafont{pagehead}{\textcolor{Mahogany}}

\usepackage[utf8]{inputenc}
\usepackage{microtype}

\usepackage[svgnames, dvipsnames]{xcolor}
\usepackage[many]{tcolorbox}

\usepackage{amsmath,amssymb,amsthm}
\allowdisplaybreaks
\usepackage[T1]{fontenc}
\usepackage{newtxtext,newtxmath}
\addtokomafont{disposition}{\rmfamily}

\theoremstyle{definition}
\newtheorem{defn}{Definition}[section]
\newtheorem{thm}[defn]{Theorem}
\newtheorem{proper}[defn]{Properties}
\tcbset{common/.style={
  colback=blue!8,
  boxrule=1pt,
  boxsep=1pt,
  left=3pt,right=3pt,top=6pt,bottom=6pt,
  oversize=0pt,
  sharp corners,
  breakable,
  before skip=\topsep,
  after skip=\topsep}
}
\tcolorboxenvironment{defn}{common}
\tcolorboxenvironment{thm}{common}
\tcolorboxenvironment{proper}{common}
\newtheorem{exmp}{Example}[section]
\tcolorboxenvironment{exmp}{
  colback=green!8,
  boxrule=1pt,
  boxsep=1pt,
  left=3pt,right=3pt,top=6pt,bottom=6pt,
  oversize=0pt,
  sharp corners,
  breakable,
  before skip=\topsep,
  after skip=\topsep,
}
\newenvironment{solution}{\begin{proof}[Solution]}{\end{proof}}

\usepackage{listings}
\lstdefinestyle{mystyle}{
    language=Python, 
    basicstyle=\footnotesize\ttfamily,
    backgroundcolor=\color{gray!20},
    keywordstyle=\color{blue!80}\bfseries,
    commentstyle=\color{Green},
    breaklines=true,
    showstringspaces=false,
    belowskip=0pt
}
\lstset{style=mystyle}

\renewcommand{\chapterformat}{\raggedleft \colorbox{Mahogany}{%
\centering\textit{\textcolor{white}{{\Large Chapter} {\Huge \thechapter}}}}}
\renewcommand{\chapterheadendvskip}{\vspace{3mm}\hrule\par\vspace{6mm}}
\renewcommand{\footnoterule}{\hrule\vspace{2mm}}

\usepackage[lastexercise,answerdelayed]{exercise}
\renewcounter{Exercise}[chapter]
\renewcommand{\theExercise}{\thechapter.\arabic{Exercise}}
\renewcommand{\ExerciseHeader}{\noindent \textbf{Exercise \theExercise} }
\renewcommand{\AnswerHeader}{\noindent \textbf{Exercise \theExercise} }
\usepackage{imakeidx}
\makeindex[intoc]
\newcommand{\keywordhl}[1]{\textbf{\textit{#1}}}
\usepackage{biblatex}
\addbibresource{reference.bib}
\nocite{*}

\usepackage{enumitem}
\usepackage{mathtools}
\usepackage{bm,esint}
\usepackage{siunitx}
\DeclareSIPrePower\quartic{4}
\usepackage{physics}
\usepackage[open,openlevel=2,atend,numbered]{bookmark}

%% (from code by Claudio Beccari in TeX and TUG News, Vol. 2, 1993)
\newcommand\Tstrut{\rule{0pt}{2.3ex}}         % "top" strut
\newcommand\Bstrut{\rule[-1.2ex]{0pt}{0pt}}   % "bottom" strut
\newcommand\TBstrut{\Tstrut\Bstrut}           % "top and bottom" strut

\usepackage{hyperref} % hyper reference
\hypersetup{
    colorlinks,
    allcolors = blue!70!green,
    pdfauthor = Benjamin Loi,
    pdftitle = Intro. to Linear Algebra for Earth Sci. Students,
    pdfsubject = Draft Version,
    pdfkeywords = {Mathematics, Earth Science}
}

\usepackage{pgfplots} % plots
\pgfplotsset{ % plots option
  compat=1.18,
  samples=100
}
\usepackage{lscape}

\usetikzlibrary{calc, matrix, angles,quotes, arrows.meta}
\usepackage{tikz-3dplot}
\tikzset{>=latex}

\includeonly{chapter0, chapter1_Intro_to_Matrix, chapter2_Inv_Det, chapter3_Sol_LinSys, chapter4_Intro_to_Vector, chapter5_Vec_Geometry, chapter6_Vec_Space, chapter6X_More_Vec_Space, chapter7_Complex_Block, chapter8_Eigen, chapter9_Ortho_Normal, chapter10_Quad, chapter11_Inner_Prod, chapter12_Least_sq, chapter13_DFT, chapter14_Markov, answers, reference}

\begin{document}

\include{chapter0}
\include{chapter1_Intro_to_Matrix}
\include{chapter2_Inv_Det}
\include{chapter3_Sol_LinSys}
\include{chapter4_Intro_to_Vector}
\include{chapter5_Vec_Geometry}
\include{chapter6_Vec_Space}
\include{chapter6X_More_Vec_Space}
\include{chapter7_Complex_Block}
\include{chapter8_Eigen}
\include{chapter9_Ortho_Normal}
\include{chapter10_Quad}
\include{chapter11_Inner_Prod}
\include{chapter12_Least_sq}
\include{chapter13_DFT}
\include{chapter14_Markov}
\include{chapter15}
\include{chapter16}
\include{answers}
\include{reference}

\end{document}